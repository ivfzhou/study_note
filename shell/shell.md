# 笔记

- /etc/shells 系统支持的 shell。
- `#!/bin/bash -v`
- 内建命令不需要创建子进程。
- `<<EOF 内容... EOF`。标准输入内容。
- 变量名只能以数字、字母、下划线组合，且不以数字开头。
- 变量赋值：`` a=1、let a=1+1、 lsl=$(ls -l)、'ls l'=$(ls -l)、"ls l"=$(ls -l) lsl=`ls -l` ``
- `$$` 返回进程 PID。`$?` 返回数字，非零表示前一个进程的错误码。位置参数 `$0 $1 $2 ...`。
- `$*` 所有参数当一个参数看。`$@` 表示所有参数。`$#` 表示参数个数。
- `echo ${1-_}` 如果参数一没有传入，则显示下划线。
- 数组：`var=(e1 e2...)`。 `echo ${var[@]}` 显示数组元素。`echo ${#var[@]}` 显示数组个数。`echo ${var[index]}` 显示数组元素。
- 运算写法 `` `expr x op y` ``、`$((x op y))`、`$[ x op y ]`。
- 单引号字符串中不识别变量，不能转义。双引号字符串中可解析变量可转义。
- 获取字符串长度 `${#string}`。字符串拼接 `""$string""`。

# 特殊字符

- `|` 管道符。
- `* ?` 通配符。
- `>` 标准输出重定向。
- `>>` 标准输出重定向，追加内容。
- `2>` 错误输出重定向。
- `&>` 标准和错误输出重定向。
- `<` 标准输入重定向。
- `&` 转入后台。
- `&& || !` 逻辑判断符号。
- `;` 结束命令。
- `;;` case 语句结束符。
- `\` 转义符。
- `+ - \* / % ** == != =` 运算符。
- `-eq -ne -lt -gt -ge -le ! -o或运算 -a与运算 && ||` 逻辑运算符。
- `-z长度是否为0 -n长度是否不为0` 字符串运算符。
- `-b是否是块文件 -c是否是字符设备文件 -d是否是目录 -f是否是普通文件 -g是否设置了SGID -k是否设置了粘着位 -p是否是有名管道 -u是否设置SUID -r是否可读 -w是否可写 -x是否执行 -s是否为空 -e是否存在` 文件测试运算符。
- `{}` 范围输出。`{0..9}` 0 到 9。
- `[[]]` 测试表达式。
- `()` 运行子 Shell。
- `(())` 变量申明，let 的简写。
- `.` 运行位 Shell。
- `,` 目录分割。
- `++ --` 自增自减。
- `=` 赋值。
- `#` 注释。

# 内建命令

- cd
- test
- source
- pwd
- shift 将输入的参数减少一个，最左边那个。
- export 让变量在其他线程也可见。
- unset 删除变量函数。
- return 用在函数内部返回函数。
- alias 设置别名。
- trap 捕获信号。

# 流程控制

- if [ 测试条件成立或命令返回0 ]; then 执行命令; elif [ 测试条件成立或命令返回0 ] then 执行命令; else 执行命令; fi
- case "$变量" in; "情况" | 情况2) 执行命令;; "情况" ) 执行命令;;  *) 默认 esac
- for 参数 in 列表; do 执行列表; done
- for ((变量初始化;循环判断条件;变量变化)); do 执行命令; done
- while ((条件)); do 执行命令; done
- until ((条件)); do 执行命令; done

# 函数

- `function name(){}`：function 可省略。
- `local 变量名`：声明函数内部变量。
